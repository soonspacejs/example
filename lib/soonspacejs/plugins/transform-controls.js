class t{constructor(t){this.ssp=t,this.control=null,this.options=null}start(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{mode:o="translate",onUpdate:n,onDragStart:l,onDragEnd:e}=s;return this.options=s,this.control=new this.ssp.THREE_PLUGINS.TransformControls(this.ssp.viewport.camera,this.ssp.viewport.rendererManager.interactiveContainer),this.control.attach(t),this.control.setMode(o),this.control.addEventListener("dragging-changed",(s=>{this.ssp.viewport.controls.currentControls.enabled=!s.value,s.value?null==l||l(t):null==e||e(t)})),this.control.addEventListener("objectChange",(()=>{null==n||n(t),this.ssp.signals.objectChanged.dispatch(t)})),this.ssp.addObject(this.control),this.control}close(){var t,s;this.control&&(this.ssp.removeObject(this.control),this.control.detach(),this.control=null,null===(s=null===(t=this.options)||void 0===t?void 0:t.onClose)||void 0===s||s.call(t))}changeMode(t){var s,o;t&&(null===(o=null===(s=this.control)||void 0===s?void 0:s.setMode)||void 0===o||o.call(s,t),this.ssp.signals.objectChanged.dispatch())}}export{t as default};
